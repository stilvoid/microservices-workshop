graph {
    node [shape=rect style=filled fillcolor="#6699cc"]
    ui
    bot

    node [shape=ellipse style=unfilled]

    ui -- {
        send_message
        receive_messages
        register_user
        list_users
        list_rooms
    }

    bot -- {
        send_message
        receive_messages
        handle_command
    }

    send_message -- {
        message_store
    }

    receive_messages -- {
        message_store
    }

    register_user -- {
        user_store
    }

    list_users -- {
        user_store
    }

    list_rooms -- {
        room_store
    }

    handle_command -- {
        get_quote
        message_all
    }

    get_quote -- {
        quote_store
    }

    message_all -- {
        list_rooms
    }
}
